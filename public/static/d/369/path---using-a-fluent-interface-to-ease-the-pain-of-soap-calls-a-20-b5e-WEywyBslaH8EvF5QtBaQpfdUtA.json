{"data":{"site":{"siteMetadata":{"title":"Chris Frewin's Full Stack Blog.","author":"Chris Frewin"}},"markdownRemark":{"id":"46f38875-64b3-5e66-9a32-acf71a5b1e77","excerpt":"The Stack‚Äôs Changed, Dude! Yes, I know, it‚Äôs been a while - but I‚Äôve been totally clocked at work and I‚Äôve also started writing a react‚Ä¶","html":"<h1>The Stack‚Äôs Changed, Dude!</h1>\n<p><sub><em>Yes, I know, it‚Äôs been a while - but I‚Äôve been totally clocked at work and I‚Äôve also started writing a react native app on the side which I‚Äôm hoping to release in beta around end of March / early April - more info coming soon!</em></sub></p>\n<p>So, in the <a href=\"https://chrisfrew.in/?post-type=dev\">dev</a> posts on this blog I usually talk about JavaScript, React, Redux, and what have you. </p>\n<p>But for work I‚Äôm currently in a PHP stack, where we‚Äôre to link an E-commerce store in Magento to SAP By Design‚Äôs database. While this presents a myriad of challenges in terms of real-time syncing on its own, I‚Äôm going to talk about the implementation details of some of the getters and setters that we will use internally on the Magento side. For example, when a new user registers on the shop, we need to set all their data on the SAP By Design side. I think we‚Äôve created an elegant solution, and it uses a fluent interface!</p>\n<h1>What is a Fluent Interface?</h1>\n<p>A fluent interface <code class=\"language-text\">is a method for designing object oriented APIs based extensively on method chaining with the goal of making the readability of the source code close to that of ordinary written prose, essentially creating a domain-specific language within the interface.</code> (<a href=\"https://en.wikipedia.org/wiki/Fluent_interface\">Wikipdia</a>)</p>\n<p>Fluent interfaces have been around since the 70s, but the most recent articles / blog posts i found on the topic <a href=\"https://www.red-gate.com/simple-talk/dotnet/net-framework/fluent-code-in-c/\">a C# one</a> and a <a href=\"https://ocramius.github.io/blog/fluent-interfaces-are-evil/\">PHP critique one</a>- were both published in 2013 - so I don‚Äôt know, was there a conference or something that caused fluent concepts to rise to the surface of the internet again?</p>\n<p>So fluent interfaces‚Ä¶ yeah! Let‚Äôs say we are tasked to set a users belt length, shoe size, and address Instead of something like this, which is perfectly fine, clean code, and which you have likely seen, or even written yourself (guilty):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$customerObject</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">customer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'123456'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$customerObject</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setBeltLength</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'180cm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$customerObject</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setShoeSize</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'180cm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token function\">callSoap</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$customerObject</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$parsedResponse</span> <span class=\"token operator\">=</span> <span class=\"token function\">parseResponse</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$response</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>(Since the original project is in PHP, i‚Äôll be keeping my snippets likewise in PHP - I hope that‚Äôs ok üòÑ.)</p>\n<p>We could implement a fluent interface for these actions and write it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$parsedResponse</span> <span class=\"token operator\">=</span> <span class=\"token function\">initializeCustomerObject</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'123456'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// accepts customer ID, returns customer object</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setBeltLength</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'180cm'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// accepts customer object, returns customer object</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setShoeSize</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'42'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ibid</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">callSOAPAndParseResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// accepts customer object, returns SOAP response</span></code></pre></div>\n<p>Note that these code snippets are only at the very top level implementation (we will look at the horrible internal function chaining down below). </p>\n<p>As we will see, not only does the code look and feel better on the top side, but the actual implementing class behind-the-scenese will also be much, much cleaner by leveraging the fluent method.</p>\n<h1>Still, why Fluent?</h1>\n<p>It‚Äôs still probably not totally clear why we chose to opt for a fluent implementation. </p>\n<p>SAP By Design uses a SOAP interface to interact with the data programmatically. To generated PHP classes from the WSDL interfaces, we used this excellent tool called <a href=\"https://github.com/wsdl2phpgenerator/wsdl2phpgenerator\">wsdl2phpgenerator</a>, which generates php classes for a given WSDL file. The good thing with SOAP is (I‚Äôll grudgingly admit it, as much as I like to think it is a kind of stone-age technology) that it is an immutable fixed-version API. Indeed, things can be updated for SAP By Design‚Äôs API, but the WSDL interface that YOU are using is a fixed interface. That means for that interface (if SAP is maintaining good SOAP standards üòâ), you can call any method on SAP‚Äôs side and be sure to get a response in the given response format - even if the WSDL is a few years old. </p>\n<p>With all of that said, while SOAP is a ‚Äòrock-solid‚Äô API, <em>because</em> it is ‚Äòrock-solid‚Äô, the generated classes for a given WSDL file interface are extremely type specific, leave you to construct really annoying method chaining to finally drill down to the things you need, which for us 99% of the time  <em>very</em> simple actions, such as setting a user‚Äôs shoe size, address, and things like that. Just to show you how comical this is I managed to find a kind of worst-case scenario example of this necessary method chaining, in address retrieval:</p>\n<p><code class=\"language-text\">$customerResponseMessage_sync-&gt;getCustomer()[0]-&gt;getAddressInformation()[0]-&gt;getAddress()-&gt;getFormattedAddress()-&gt;getFormattedAddress()-&gt;getFirstLineDescription()</code></p>\n<p>We won‚Äôt go into that example in this post, but after doing enough of this method chaining and object constructing, I began to notice that all my setter methods looked something like this (we will look at three methods for completeness: <code class=\"language-text\">setBeltLength</code> and <code class=\"language-text\">setShoeSize</code>; <code class=\"language-text\">setMaintenceCustomer</code> is just a helper function to initialize a user object):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setMaintenanceCustomer</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$internalID</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomerMaintainRequestBundleCustomer_V1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setInternalID</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$internalID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setBeltLength</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$internalID</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$beltSize</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setMaintenceCustomer</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$internalID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setBelt_Length</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$beltSize</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setCustomer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// can be array of customers</span>\n\n    <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">soapService</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">MaintainBundle_V1</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getMaximumLogItemSeverityCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setShoeSize</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$internalID</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$shoeSize</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setMaintenceCustomer</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$internalID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setShoe_Size</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$shoeSize</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setCustomer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// can be array of customers</span>\n\n    <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">soapService</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">MaintainBundle_V1</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getMaximumLogItemSeverityCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// can you guess what the 'setAddress' function looks like? üòÇ</span></code></pre></div>\n<p>You can see in each function, there is only a single internal SOAP function that is <em>actually</em> in the snippets above, those are <code class=\"language-text\">setBelt_length</code> and <code class=\"language-text\">setShoe_Size</code> methods, respectively. </p>\n<p>ALL the other code is just SOAP fluff, creating the proper objects in order to have the correct typing for the method call we need to use! </p>\n<p>In this case then, a fluent interface would make sense, for quite a few reasons:</p>\n<ul>\n<li>it removes all that enormous code ‚Äòfluff‚Äô from the WSDL methods - which in plain methods would be pretty much outside of our control because they are generated by <code class=\"language-text\">wsdl2phpgenerator</code></li>\n<li>it removes coupling from the methods - we don‚Äôt need to pass in internalID every time, AND we seperate calling SOAP into it‚Äôs own function, instead of calling it in each <code class=\"language-text\">set</code> method (agreed, partly my fault which could have been avoided in the first version implementation - but at least with fluent it is totally out of the question)</li>\n<li>it prevents us from creating extra <code class=\"language-text\">new()</code> objects.  For each method, we are only doing exactly what the method suggests; we aren‚Äôt calling the SOAP service, we aren‚Äôt parsing response errors. This is generally good; helping us enforce the (single responsibility principle)[https://en.wikipedia.org/wiki/Single<em>responsibility</em>principle]</li>\n<li>it makes it trivial to chain different getters and setters together. As the site grows, we may find a need to have an exotic chaining of methods to complete a particular task, which, when we are done with the fluent interface, will be trivial to write the code for.</li>\n</ul>\n<h1>Alright, Show Me the Fluent Implementation!</h1>\n<p>Rewritten to fluent, those methods look as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">private</span> <span class=\"token variable\">$maintenanceCustomer</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setMaintenanceCustomer</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$internalID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomerMaintainRequestBundleCustomer_V1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// this has a HUGE constructor, don't know if all fields are mandatory</span>\n    <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setInternalID</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$internalID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">maintenanceCustomer</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$customerMaintainRequestBundleCustomer_V1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setBeltLength</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$beltSize</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">maintenanceCustomer</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setBelt_Length</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$beltSize</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n    \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setShoeSize</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$shoeSize</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">maintenanceCustomer</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setShoe_Size</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$shoeSize</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">callSOAPAndParseResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setCustomer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">maintenanceCustomer</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// can be array of customers</span>\n    <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">soapService</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">MaintainBundle_V1</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getMaximumLogItemSeverityCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>By introducing a private variable $maintenanceCustomer, slightly modifying <code class=\"language-text\">setMaintenanceCustomer</code>, and adding a new method, <code class=\"language-text\">callSOAPAndParseResponse</code>, we reduce our setter methods to single parameter, 2 line functions üòÑ. Not bad!</p>\n<h1>Bonus Extension</h1>\n<p>Another fluent opportunity presents itself. We may later decide to improve our error handling and separate it out completely from <code class=\"language-text\">callSOAPAndParseResponse</code> - perhaps into <code class=\"language-text\">callSOAP</code> and <code class=\"language-text\">parseResponse</code>. I would add another private variable <code class=\"language-text\">$confirmationMessage</code> and make that the return signature of callSoap:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">callSOAP</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setCustomer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">maintenanceCustomer</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// can be array of customers</span>\n    <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">soapService</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">MaintainBundle_V1</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$customerBundleMaintainRequestMessage_sync_V1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">confirmationMessage</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$customerBundleMaintainConfirmationMessage_sync_V1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">parseResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">confirmationMessage</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getMaximumLogItemSeverityCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">confirmationMessage</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getMaximumLogItemSeverityCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token comment\">// even more fancy log parsing / error handling...</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In any case, while the fluent method has been around for a while, the fluent methodology definitely has value - and I think my code snippets illustrate that fact pretty well! :laugh:</p>\n<p>Enjoy, and Cheers! üç∫</p>\n<p>-Chris</p>","frontmatter":{"title":"Using a Fluent Interface to Ease The Pain of SOAP Calls","date":"February 27, 2019","draft":false,"starID":500,"postType":"dev"}}},"pageContext":{"slug":"/using-a-fluent-interface-to-ease-the-pain-of-soap-calls/","prev":{"fields":{"slug":"/a-detailed-tutorial-shopify-storefront-apireact-redux/"},"frontmatter":{"date":"07 November, 2018","title":"A Detailed Tutorial - Shopify's Storefront API + React + Redux","draft":false,"starID":30,"postType":"dev","link":"https://chrisfrew.in/a-detailed-tutorial-shopify-storefront-apireact-redux/","relativeLink":"/a-detailed-tutorial-shopify-storefront-apireact-redux/"}},"next":null}}